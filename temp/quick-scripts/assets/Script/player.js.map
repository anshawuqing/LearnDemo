{"version":3,"sources":["player.js"],"names":["cc","Class","extends","Component","properties","jumbHeight","jumbDuration","maxMoveSped","accel","jumpAudio","default","type","AudioClip","onLoad","jumpAction","setJumpAction","node","runAction","accLeft","accRight","xSpeed","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onkeydown","KEY_UP","onkeyUp","start","JumpUp","moveBy","v2","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","callback","callFunc","playJumpSound","repeatForever","sequence","audioEngine","playEffect","event","keyCode","update","dt","Math","abs","x"],"mappings":"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","file":"player.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        \r\n        //主角跳跃高度\r\n     jumbHeight: 0,\r\n     // 主角跳跃移动时间\r\n     jumbDuration: 0,\r\n     // 最大移动速度\r\n     maxMoveSped: 0,\r\n     // 加速度\r\n     accel:0,\r\n     // 跳跃音效资源\r\n     jumpAudio: \r\n     {\r\n          default:null,\r\n          type: cc.AudioClip\r\n     },\r\n      \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function() {\r\n    \r\n        // 初始化跳跃动作\r\n     this.jumpAction = this.setJumpAction();\r\n     this.node.runAction(this.jumpAction);\r\n\r\n    //加速度 方向开关\r\n    this.accLeft = false;\r\n    this.accRight = false;\r\n    // 主角当前水平方向开关\r\n    this.xSpeed = 0;\r\n    \r\n    ///  注册订阅事件  \r\n    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onkeydown,this);\r\n    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onkeyUp,this);\r\n    \r\n\r\n\r\n    },\r\n\r\n    start: function () {\r\n\r\n    },\r\n    ///跳跃\r\n   setJumpAction:  function ()\r\n   {\r\n      //跳跃上升\r\n      var JumpUp = cc.moveBy(this.jumbDuration,cc.v2(0,this.jumbHeight)).easing(cc.easeCubicActionOut());\r\n     // 下落 \r\n     var   jumpDown = cc.moveBy(this.jumbDuration, cc.v2(0,- this.jumbHeight)).easing(cc.easeCubicActionIn());\r\n    // 增加一个声音回调，用于在 动作结束时调用我们定义的其他方法\r\n      var callback = cc.callFunc(this.playJumpSound,this);\r\n   \r\n     //  不断重复 \r\n    return cc.repeatForever(cc.sequence(JumpUp,jumpDown,callback));\r\n   },\r\n   \r\n\r\n   /// 声音播放函数\r\n    playJumpSound: function()\r\n    {\r\n       //调用声音播放声音\r\n       cc.audioEngine.playEffect(this.jumpAudio,false);\r\n    },\r\n\r\n    // 当鼠标按下去的事件\r\n    onkeydown (event)\r\n    {\r\n     \r\n        switch(event.keyCode)\r\n        {\r\n          case 68:\r\n               this.accRight = true;\r\n         break;\r\n         case  65:\r\n               this.accLeft =  true;\r\n            break;\r\n        }\r\n    },\r\n\r\n\r\n    onkeyUp (event)\r\n    {\r\n     \r\n       switch(event.keyCode)\r\n        {\r\n           case  68:\r\n           this.accRight  = false; \r\n           break; \r\n           case  65:\r\n           this.accLeft = false ;\r\n           break;\r\n        }\r\n    },\r\n\r\n    update : function (dt) \r\n    { \r\n        //根据当前加速度方向 每帧更新速度\r\n    if(this.accLeft)\r\n    { \r\n        this.xSpeed  -= this.accel *dt;\r\n    } \r\n    else if(this.accRight)\r\n    {\r\n        this.xSpeed += this.accel*dt;\r\n    }\r\n     \r\n     //限制主角的速度不能超过 最大值\r\n     if(Math.abs(this.xSpeed) >  this.maxMoveSped )\r\n     {\r\n       this.xSpeed = this.maxMoveSped  * this.xSpeed/Math.abs(this.xSpeed);\r\n     }\r\n\r\n    // 根据当前 速度更新主角信息\r\n    this.node.x += this.xSpeed *dt;\r\n}\r\n});\r\n"]}