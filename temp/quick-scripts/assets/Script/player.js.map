{"version":3,"sources":["player.js"],"names":["cc","Class","extends","Component","properties","jumbHeight","jumbDuration","maxMoveSped","accel","onLoad","jumpAction","setJumpAction","node","runAction","accLeft","accRight","xSpeed","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onkeydown","KEY_UP","onkeyUp","start","JumpUp","moveBy","v2","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","repeatForever","sequence","event","console","log","keyCode","update","dt","Math","abs","x"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;;AAER;AACHC,oBAAY,CAHD;AAIX;AACAC,sBAAc,CALH;AAMX;AACAC,qBAAa,CAPF;AAQX;AACAC,eAAM;;AATK,KAHP;;AAgBL;;AAEAC,YAAQ,kBAAW;;AAEf;AACH,aAAKC,UAAL,GAAkB,KAAKC,aAAL,EAAlB;AACA,aAAKC,IAAL,CAAUC,SAAV,CAAoB,KAAKH,UAAzB;;AAED;AACA,aAAKI,OAAL,GAAe,KAAf;AACA,aAAKC,QAAL,GAAgB,KAAhB;AACA;AACA,aAAKC,MAAL,GAAc,CAAd;;AAEA;AACAhB,WAAGiB,WAAH,CAAeC,EAAf,CAAkBlB,GAAGmB,WAAH,CAAeC,SAAf,CAAyBC,QAA3C,EAAoD,KAAKC,SAAzD,EAAmE,IAAnE;AACAtB,WAAGiB,WAAH,CAAeC,EAAf,CAAkBlB,GAAGmB,WAAH,CAAeC,SAAf,CAAyBG,MAA3C,EAAkD,KAAKC,OAAvD,EAA+D,IAA/D;AAIC,KApCI;;AAsCLC,WAAO,iBAAY,CAElB,CAxCI;AAyCL;AACDd,mBAAgB,yBAChB;AACG;AACA,YAAIe,SAAS1B,GAAG2B,MAAH,CAAU,KAAKrB,YAAf,EAA4BN,GAAG4B,EAAH,CAAM,CAAN,EAAQ,KAAKvB,UAAb,CAA5B,EAAsDwB,MAAtD,CAA6D7B,GAAG8B,kBAAH,EAA7D,CAAb;AACD;AACA,YAAMC,WAAW/B,GAAG2B,MAAH,CAAU,KAAKrB,YAAf,EAA6BN,GAAG4B,EAAH,CAAM,CAAN,EAAQ,CAAE,KAAKvB,UAAf,CAA7B,EAAyDwB,MAAzD,CAAgE7B,GAAGgC,iBAAH,EAAhE,CAAjB;AACA;AACD,eAAOhC,GAAGiC,aAAH,CAAiBjC,GAAGkC,QAAH,CAAYR,MAAZ,EAAmBK,QAAnB,CAAjB,CAAP;AACA,KAlDK;;AAoDL;AACAT,aArDK,qBAqDMa,KArDN,EAsDL;AACGC,gBAAQC,GAAR,CAAY,kBAAgBF,MAAMG,OAAlC;AACC,gBAAOH,MAAMG,OAAb;AAEE,iBAAK,EAAL;AACK,qBAAKvB,QAAL,GAAgB,IAAhB;AACN;AACA,iBAAM,EAAN;AACM,qBAAKD,OAAL,GAAgB,IAAhB;AACH;AAPJ;AASH,KAjEI;AAoELU,WApEK,mBAoEIW,KApEJ,EAqEL;AACGC,gBAAQC,GAAR,CAAY,mBAAiBF,MAAMG,OAAnC;AACA,gBAAOH,MAAMG,OAAb;AAEI,iBAAM,EAAN;AACA,qBAAKvB,QAAL,GAAiB,KAAjB;AACA;AACA,iBAAM,EAAN;AACA,qBAAKD,OAAL,GAAe,KAAf;AACA;AAPJ;AASF,KAhFI;;;AAkFLyB,YAAS,gBAAUC,EAAV,EACT;AACI;AACJ,YAAG,KAAK1B,OAAR,EACA;AACI,iBAAKE,MAAL,IAAgB,KAAKR,KAAL,GAAYgC,EAA5B;AACH,SAHD,MAIK,IAAG,KAAKzB,QAAR,EACL;AACI,iBAAKC,MAAL,IAAe,KAAKR,KAAL,GAAWgC,EAA1B;AACH;;AAEA;AACA,YAAGC,KAAKC,GAAL,CAAS,KAAK1B,MAAd,IAAyB,KAAKT,WAAjC,EACA;AACE,iBAAKS,MAAL,GAAc,KAAKT,WAAL,GAAoB,KAAKS,MAAzB,GAAgCyB,KAAKC,GAAL,CAAS,KAAK1B,MAAd,CAA9C;AACD;;AAEF;AACA,aAAKJ,IAAL,CAAU+B,CAAV,IAAe,KAAK3B,MAAL,GAAawB,EAA5B;AACH;AAtGQ,CAAT","file":"player.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        \r\n        //主角跳跃高度\r\n     jumbHeight: 0,\r\n     // 主角跳跃移动时间\r\n     jumbDuration: 0,\r\n     // 最大移动速度\r\n     maxMoveSped: 0,\r\n     // 加速度\r\n     accel:0\r\n      \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function() {\r\n    \r\n        // 初始化跳跃动作\r\n     this.jumpAction = this.setJumpAction();\r\n     this.node.runAction(this.jumpAction);\r\n\r\n    //加速度 方向开关\r\n    this.accLeft = false;\r\n    this.accRight = false;\r\n    // 主角当前水平方向开关\r\n    this.xSpeed = 0;\r\n    \r\n    ///  注册订阅事件  \r\n    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onkeydown,this);\r\n    cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onkeyUp,this);\r\n    \r\n\r\n\r\n    },\r\n\r\n    start: function () {\r\n\r\n    },\r\n    ///跳跃\r\n   setJumpAction:  function ()\r\n   {\r\n      //跳跃上升\r\n      var JumpUp = cc.moveBy(this.jumbDuration,cc.v2(0,this.jumbHeight)).easing(cc.easeCubicActionOut());\r\n     // 下落 \r\n     var   jumpDown = cc.moveBy(this.jumbDuration, cc.v2(0,- this.jumbHeight)).easing(cc.easeCubicActionIn());\r\n     //  不断重复 \r\n    return cc.repeatForever(cc.sequence(JumpUp,jumpDown));\r\n   },\r\n   \r\n    // 当鼠标按下去的事件\r\n    onkeydown (event)\r\n    {\r\n       console.log(\"测试——按下—————事件\"+event.keyCode);\r\n        switch(event.keyCode)\r\n        {\r\n          case 68:\r\n               this.accRight = true;\r\n         break;\r\n         case  65:\r\n               this.accLeft =  true;\r\n            break;\r\n        }\r\n    },\r\n\r\n\r\n    onkeyUp (event)\r\n    {\r\n       console.log(\"测试———抬起—————事件\"+event.keyCode);\r\n       switch(event.keyCode)\r\n        {\r\n           case  68:\r\n           this.accRight  = false; \r\n           break; \r\n           case  65:\r\n           this.accLeft = false ;\r\n           break;\r\n        }\r\n    },\r\n\r\n    update : function (dt) \r\n    { \r\n        //根据当前加速度方向 每帧更新速度\r\n    if(this.accLeft)\r\n    { \r\n        this.xSpeed  -= this.accel *dt;\r\n    } \r\n    else if(this.accRight)\r\n    {\r\n        this.xSpeed += this.accel*dt;\r\n    }\r\n     \r\n     //限制主角的速度不能超过 最大值\r\n     if(Math.abs(this.xSpeed) >  this.maxMoveSped )\r\n     {\r\n       this.xSpeed = this.maxMoveSped  * this.xSpeed/Math.abs(this.xSpeed);\r\n     }\r\n\r\n    // 根据当前 速度更新主角信息\r\n    this.node.x += this.xSpeed *dt;\r\n}\r\n});\r\n"]}