{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\Game.js"],"names":["cc","Class","extends","Component","properties","starPrefab","default","type","Prefab","maxStartDuration","minStartDuration","ground","Node","player","scoreDisplay","Label","scoreAudio","AudioClip","onLoad","timer","starDuration","groundY","y","height","spawnNewStar","score","newStar","instantiate","node","addChild","setPosition","getNewStarPosition","getComponent","game","Math","random","randX","randY","jumbHeight","maxX","width","v2","start","update","dt","gameOver","gainScore","string","audioEngine","playEffect","stopAllActions","director","loadScene"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;;AAEV;AACCC,oBACA;AACEC,qBAAU,IADZ;AAEEC,kBAAKP,GAAGQ;AAFV,SAJS;AAQZ;AACGC,0BAAkB,CATT;AAUTC,0BAAkB,CAVT;AAWX;AACEC,gBACD;AACGL,qBAAQ,IADX;AAEGC,kBAAKP,GAAGY;AAFX,SAbU;AAiBV;AACAC,gBACA;AACIP,qBAAS,IADb;AAEKC,kBAAMP,GAAGY;AAFd,SAnBU;AAuBVE,sBACA;AACAR,qBAAQ,IADR;AAEAC,kBAAMP,GAAGe;AAFT,SAxBU;;AA6BV;AACAC,oBACF;AACEV,qBAAS,IADX;AAEEC,kBAAMP,GAAGiB;AAFX;;AA/BY,KAHP;;AAyCL;;AAEAC,YAAQ,kBACR;AACG;AACC,aAAKC,KAAL,GAAa,CAAb;AACA,aAAKC,YAAL,GAAoB,CAApB;AACA;AACA,aAAKC,OAAL,GAAgB,KAAKV,MAAL,CAAYW,CAAZ,GAAgB,KAAKX,MAAL,CAAYY,MAAZ,GAAmB,CAAnD;AACA;AACA,aAAKC,YAAL;AACA;AACA,aAAKC,KAAL,GAAa,CAAb;AACH,KAtDI;;AAwDND,kBAAa,wBACb;AACI;AACA,YAAIE,UAAW1B,GAAG2B,WAAH,CAAe,KAAKtB,UAApB,CAAf;AACA;AACA,aAAKuB,IAAL,CAAUC,QAAV,CAAmBH,OAAnB;AACA;AACAA,gBAAQI,WAAR,CAAoB,KAAKC,kBAAL,EAApB;AACA;AACAL,gBAAQM,YAAR,CAAqB,MAArB,EAA6BC,IAA7B,GAAoC,IAApC;AACD;AACA,aAAKb,YAAL,GAAqB,KAAKV,gBAAL,GAAuBwB,KAAKC,MAAL,MAAgB,KAAK1B,gBAAL,GAAwB,KAAKC,gBAA7C,CAA5C;AACA,aAAKS,KAAL,GAAa,CAAb;AAEF,KAtEK;;AAwEN;AACCY,wBAAoB,8BACpB;AACI,YAAIK,QAAS,CAAb;AACC;AACA,YAAIC,QAAQ,KAAKhB,OAAL,GAAea,KAAKC,MAAL,KAAc,KAAKtB,MAAL,CAAYmB,YAAZ,CAAyB,QAAzB,EAAmCM,UAAhE,GAA2E,EAAvF;;AAEC;;AAEC,YAAIC,OAAQ,KAAKX,IAAL,CAAUY,KAAV,GAAgB,CAA5B;;AAEFJ,gBAAQ,CAACF,KAAKC,MAAL,KAAgB,GAAjB,IAAsB,CAAtB,GAAyBI,IAAjC;AACA;AACA,eAAQvC,GAAGyC,EAAH,CAAML,KAAN,EAAYC,KAAZ,CAAR;AAEJ,KAvFI;;AAyFNK,SAzFM,mBAyFG,CAEP,CA3FI;;;AA6FLC,YAAQ,gBAAUC,EAAV,EACR;AACE;AACA;AACA,YAAG,KAAKzB,KAAL,GAAa,KAAKC,YAArB,EACA;AACI,iBAAKyB,QAAL;AACF;AACD;;AAED,aAAK1B,KAAL,IAAeyB,EAAf;AACD,KAxGI;;AA0GL;AACAE,eAAU,qBACV;AACI,aAAKrB,KAAL,IAAe,CAAf;AACA;AACA,aAAKX,YAAL,CAAkBiC,MAAlB,GAA2B,UAAS,KAAKtB,KAAzC;AACA;AACAzB,WAAGgD,WAAH,CAAeC,UAAf,CAA0B,KAAKjC,UAA/B,EAA0C,KAA1C;AACH,KAlHI;;AAoHL;AACA6B,cAAU,oBACV;AACE,aAAKhC,MAAL,CAAYqC,cAAZ,GADF,CACiC;AAC/BlD,WAAGmD,QAAH,CAAYC,SAAZ,CAAsB,MAAtB,EAFF,CAEkC;AACjC;AAzHI,CAAT","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n    \r\n      // 这里引用 星星的资源\r\n       starPrefab:\r\n       {\r\n         default:  null,\r\n         type:cc.Prefab\r\n       },\r\n    //星星产生后消失时间的随机范围\r\n       maxStartDuration: 0,\r\n       minStartDuration: 0,\r\n     //地面节点，用于确定 星星生成的 高度 \r\n       ground:\r\n      {\r\n         default:null,\r\n         type:cc.Node\r\n      },\r\n      // 设置player  的属性\r\n      player:\r\n      {\r\n          default: null,\r\n           type: cc.Node\r\n      },\r\n      scoreDisplay: \r\n      {\r\n      default:null,\r\n      type: cc.Label\r\n      },\r\n  \r\n      /// 声音 播放组件\r\n      scoreAudio:\r\n    {\r\n      default: null,\r\n      type: cc.AudioClip\r\n    },\r\n        \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () \r\n    {\r\n       //初始化计时器 \r\n        this.timer = 0; \r\n        this.starDuration = 0;\r\n        //获取 地平面的 Y轴 坐标\r\n        this.groundY =  this.ground.y + this.ground.height/2;\r\n        //生成一个新的星星\r\n        this.spawnNewStar();\r\n        // 初始化积分信息\r\n        this.score = 0;\r\n    },\r\n \r\n   spawnNewStar:function()\r\n   {\r\n       //使用给定的横模版在场景中生成一个新模板\r\n       var newStar  = cc.instantiate(this.starPrefab); \r\n       //将 新增的节点 增加到 Canvas 下面\r\n       this.node.addChild(newStar);\r\n       // 为 星星设置一个随机位置\r\n       newStar.setPosition(this.getNewStarPosition());     \r\n       //为 星星添加新的组件    \r\n       newStar.getComponent('Star').game = this;\r\n      // 重置计时器，根据消失时间范围 随机取一个值\r\n      this.starDuration  = this.minStartDuration +Math.random()* (this.maxStartDuration - this.minStartDuration); \r\n      this.timer = 0;\r\n\r\n   },\r\n\r\n   /// 得到卫星新的 组标点信息\r\n    getNewStarPosition: function ()\r\n    {\r\n        var randX  = 0;\r\n         // 根据地平面位置和主角跳跃高度,随机到一个星星的Y坐标\r\n         var randY = this.groundY + Math.random()*this.player.getComponent('player').jumbHeight+50;\r\n         \r\n          // var maxX = thiS.node.width/2;\r\n\r\n           var maxX =  this.node.width/2;  \r\n       \r\n         randX = (Math.random() - 0.5)*2 *maxX;\r\n         // 返回星星 坐标\r\n         return  cc.v2(randX,randY);\r\n\r\n    },\r\n\r\n   start () {\r\n\r\n    },\r\n\r\n    update: function (dt) \r\n    {\r\n      //每帧更新计时器 超过限度还没有生成新的星星\r\n      //就会调用失败的逻辑\r\n      if(this.timer > this.starDuration )\r\n      {\r\n          this.gameOver();\r\n        return;\r\n      }\r\n    \r\n      this.timer  += dt;\r\n    }, \r\n\r\n    /// 获取积分信息\r\n    gainScore:function()\r\n    {\r\n        this.score  += 1;\r\n        //更新UI 界面文字\r\n        this.scoreDisplay.string = \"Score\"+ this.score;\r\n        //播放得分音效, 当获取积分时进行 音效的播放\r\n        cc.audioEngine.playEffect(this.scoreAudio,false);\r\n    },\r\n\r\n    ///\r\n    gameOver: function()\r\n    {\r\n      this.player.stopAllActions();  // 停止节点上的所有Action \r\n      cc.director.loadScene(\"game\");  // 重新加载游戏场景\r\n    }\r\n});\r\n"]}